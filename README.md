# Config Checker

CLI-инструмент на Go + Python для валидации YAML-конфигураций.\
Проверяет наличие обязательных полей и корректность значений (например,
`version`, `host`, `port`).
------------------------------------------------------------------------

## Возможности

-   Проверка обязательных полей: `version`, `host`
-   Валидация порта (диапазон `1–65535`)
-   Возврат `exit code 1` при ошибке
-   Вывод ошибок в `stderr`
-   Сообщение `Configuration is valid` при успешной проверке

------------------------------------------------------------------------

## Требования

-   Go 1.22+
-   Python 3.8+
-   pytest

------------------------------------------------------------------------

## Установка

``` bash
git clone https://github.com/yar4e4/cfg-checker.git
cd cfg-checker
go mod tidy
```

------------------------------------------------------------------------

## Сборка

### Прямой способ

``` bash
go build -o bin/validator main.go
```

### Через Makefile (рекомендуется)

``` bash
make build
```

------------------------------------------------------------------------

## Использование

``` bash
./bin/validator path/to/config.yaml
```

------------------------------------------------------------------------

## Примеры

### Успешная проверка

``` bash
./bin/validator tests/data/valid.yaml
```

Вывод:

    Configuration is valid

### Ошибка валидации

``` bash
./bin/validator tests/data/missing_version.yaml
```

Вывод:

    Validation failed:
      - field 'version' is required

------------------------------------------------------------------------

## Тестирование

Тесты написаны на Python + pytest.

Подход --- black-box: - запускается бинарник - проверяется вывод -
проверяется код возврата

### Запуск через Makefile

``` bash
make test
```

### Запуск вручную

``` bash
cd tests
pytest -v
```

------------------------------------------------------------------------

## Покрываемые сценарии

-   Валидный конфиг
-   Отсутствующие обязательные поля
-   Некорректные значения (например, порт вне диапазона)
-   Несуществующий файл

------------------------------------------------------------------------

## Структура проекта

    ├── main.go
    ├── go.mod
    ├── go.sum
    ├── Makefile
    ├── tests/
    │   ├── conftest.py
    │   ├── test_validator.py
    │   └── data/             # тестовые YAML-файлы
    └── bin/                  # собранный бинарник (после запуска)